# 倒排索引介绍

倒排索引（Inverted Index）是全文搜索引擎的核心数据结构，用于快速定位包含特定关键词的文档。它的主要思想是将词汇映射到包含该词汇的所有文档列表，从而提高搜索效率。

---

## 1. 基本概念

- **正排索引（Forward Index）：**  
  存储每个文档包含的词汇。例如，文档1包含 ["hello", "world", "hello"]。

- **倒排索引（Inverted Index）：**  
  将词汇映射到出现该词汇的文档集合。例如：
    - "hello" → [文档1, 文档2]
    - "world" → [文档1]

---

## 2. 倒排索引的构建过程

1. **分词处理：**  
   对文档内容进行分词，将文本拆分为单个词语。

2. **建立词典：**  
   收集所有唯一的词语，构成一个词汇表。

3. **记录文档列表：**  
   遍历每个文档，对每个词语记录该词出现的文档ID，从而建立词到文档ID列表的映射。

---

## 3. 示例

假设有两个文档：

- **文档 1：** "Elasticsearch 是一个搜索引擎"
- **文档 2：** "搜索引擎使用倒排索引实现快速查询"

经过分词处理（忽略停用词和标点），得到：
- **文档 1：** ["elasticsearch", "搜索", "引擎"]
- **文档 2：** ["搜索", "引擎", "使用", "倒排", "索引", "实现", "快速", "查询"]

构建倒排索引后：
- **"elasticsearch"** → [文档1]
- **"搜索"** → [文档1, 文档2]
- **"引擎"** → [文档1, 文档2]
- **"使用"** → [文档2]
- **"倒排"** → [文档2]
- **"索引"** → [文档2]
- **"实现"** → [文档2]
- **"快速"** → [文档2]
- **"查询"** → [文档2]

---

## 4. 优点与缺点

### 优点
- **查询效率高：**  
  可以快速定位包含指定关键词的所有文档，提高搜索速度。

- **支持复杂查询：**  
  方便实现布尔查询（与、或、非）和相关性排序。

### 缺点
- **构建与更新开销大：**  
  初次构建和实时更新倒排索引可能消耗较多资源。

- **存储空间需求高：**  
  对于大规模数据，倒排索引可能占用大量存储空间，通常需要压缩技术进行优化。

---

## 5. 应用场景

倒排索引主要用于全文搜索引擎中，如：
- **Elasticsearch**
- **Apache Solr**
- **Lucene**

这些系统利用倒排索引实现高效的关键词搜索、文本匹配和数据分析。

---